{"version":3,"sources":["context.js","item.js","listComponent.js","index.js","App.js"],"names":["createContext","ItemComponent","props","value","ref","useRef","registerSelectedItem","useContext","Context","useEffect","current","react_default","a","createElement","className","style","display","alignContent","alignItems","justifyContent","height","width","backgroundColor","margin","week","countries","ListComponent","map","item","i","key","rootElement","document","getElementById","ReactDOM","render","refContainer","_useState","useState","_useState2","Object","slicedToArray","isSelecting","setSelecting","_useState3","_useState4","selectingItems","setItems","_useState5","_useState6","selectedItems","setSelectedItems","_useState7","x1","x2","y1","y2","_useState8","boundBox","setBoundBox","useCallback","oldItems","find","el","list","arguments","length","undefined","forEach","isEqual","updateProps","concat","toConsumableArray","registerSelectedMultiple","setBoundsValue","_ref","old","updateBoundBox","_ref2","smallerX","Math","min","largerX","max","smallerY","largerY","isNaN","left","top","doObjectCollide","_ref3","getBoundingClientRect","items","filter","_ref$current$getBound","itemTop","itemLeft","itemWidth","itemHeight","verifyCollide","debounce","onMouseUp","ev","stopPropagation","onMouseMove","objectSpread2","clientX","clientY","onMouseDown","target","rest","objectWithoutProperties","window","onmouseup","onmousemove","clxs","padding","context","Provider","fontSize","fontWeight","cursor"],"mappings":"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","file":"static/js/main.818dd484.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nexport default createContext();\n","import React, { useEffect, useRef, useContext } from \"react\";\nimport \"./styles.css\";\nimport Context from \"./context\";\n\nexport default function ItemComponent(props) {\n  const { value } = props;\n  const ref = useRef(\"item\");\n  const { registerSelectedItem } = useContext(Context);\n\n  useEffect(() => {\n    if (ref.current) {\n      registerSelectedItem(ref, props)\n    }\n  }, [ref, registerSelectedItem, props]);\n\n  return (\n    <div className=\"item\" ref={ref} style={{ display: 'flex', alignContent: 'center', alignItems: 'center', justifyContent: 'center', height: '100px', width: '10%', backgroundColor: '#7080A0', margin: '1rem'}}>\n      {value}\n    </div>\n  );\n}\n","import React from \"react\";\nimport Item from \"./item\";\nconst week = [\"Segunda\", \"Ter√ßa\", \"Quarta\", \"Quinta\", \"Sexta\", \"Sabado\"];\nconst countries = [ 'Brasil', 'Argentina', 'Holando', 'Paraguuai', 'Uruguai']\n\nexport default function ListComponent() {\n  return (\n    <div>\n      <div className=\"container\">\n        {week.map((item, i) => (\n          <Item value={item} key={i} />\n        ))}\n      </div>\n      <div className=\"container\">\n        {countries.map((item, i) => (\n          <Item value={item} key={i} />\n        ))}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\nimport debounce from 'lodash/debounce'\nimport isEqual from 'lodash/isEqual'\nimport \"./styles.css\";\nimport clxs from 'clsx'\nimport List from \"./listComponent\";\nimport Context from \"./context\";\nexport default function App() {\n  const ref = useRef();\n  const refContainer = useRef();\n  const [isSelecting, setSelecting] = useState(false)\n  const [selectingItems, setItems] = useState([]);\n  const [selectedItems, setSelectedItems] = useState([])\n  const [boundBox, setBoundBox] = useState({x1: 0, x2: 0, y1: 0, y2: 0 })\n\n  const updateProps = (list = [], ref, props) => {\n    list.forEach((item) => {\n      if (item.ref.current === ref.current) {\n        if (!isEqual(item.props, props)) {\n          item.props = props\n        }\n      }\n    })\n    return list\n  }\n  const registerSelectedItem = useCallback((ref, props) => {\n    setSelectedItems(oldItems => !oldItems.find(el => el.ref.current === ref.current) ? [...oldItems, { ref, props }] : updateProps(oldItems, ref, props))\n  }, [])\n\n  const registerSelectedMultiple = useCallback((list) => {\n    setItems(list);\n  }, []);\n\n  const setBoundsValue = useCallback(({ x1, x2, y1, y2 }) => {\n    setBoundBox(old => {\n      old.x1 = x1\n      old.x2 = x2\n      old.y1 = y1\n      old.y2 = y2\n      return old\n    })\n  }, [])\n\n  const updateBoundBox = useCallback(({ x1, x2, y1, y2 }) => {\n    const smallerX = Math.min(x1, x2)\n    const largerX = Math.max(x1, x2)\n    const smallerY = Math.min(y1, y2)\n    const largerY = Math.max(y1, y2)\n    if (isNaN(smallerX)|| isNaN(smallerY)) return\n    if (ref.current && smallerX && smallerY) {\n      ref.current.style.width = `${largerX - smallerX}px`\n      ref.current.style.height = `${largerY - smallerY}px`\n      ref.current.style.left = `${smallerX}px`\n      ref.current.style.top = `${smallerY}px`\n    }\n    setBoundsValue({ x1, x2, y1, y2 })\n  }, [setBoundsValue])\n\n  const doObjectCollide = useCallback(() => {\n    const { top, left, width, height } = ref.current && ref.current.getBoundingClientRect()\n    const items = selectedItems.filter(item => {\n      if (!item || !item.ref || !item.ref.current) return false\n      const { ref } = item\n      const { top: itemTop, left: itemLeft, width: itemWidth, height: itemHeight } = ref.current.getBoundingClientRect()\n      if (itemLeft < left + width &&\n        itemLeft + itemWidth > left &&\n        itemTop < top + height &&\n        top + height > itemTop &&\n        itemTop + (itemHeight || 0) > top){\n          return true\n        }\n        return false\n    })\n    registerSelectedMultiple(items)\n  }, [registerSelectedMultiple, selectedItems])\n\n  const verifyCollide = debounce(doObjectCollide, 300)\n\n  const onMouseUp = useCallback(ev => {\n    ev.stopPropagation();\n    setSelecting(false)\n    if (ref.current) {\n      ref.current.style.width = '0px'\n      ref.current.style.height = '0px'\n      ref.current.style.left = '0px'\n      ref.current.style.top = '0px'\n    }\n    setBoundsValue({ x1: 0, x2: 0, y1: 0, y2: 0 })\n  }, [setBoundsValue])\n\n  const onMouseMove = useCallback((ev) => {\n    ev.stopPropagation();\n    if (isSelecting) {\n      verifyCollide()\n      updateBoundBox({...boundBox, x2: ev.clientX, y2: ev.clientY})\n    }\n  }, [isSelecting, updateBoundBox, boundBox, verifyCollide])\n\n  const onMouseDown = useCallback(ev => {\n    const { target, ...rest } = ev\n    setItems([])\n    ev.stopPropagation();\n    setSelecting(true)\n    verifyCollide()\n    updateBoundBox({ ...boundBox, x1: rest.clientX, y1: rest.clientY })\n  }, [updateBoundBox, boundBox, verifyCollide])\n\n  useEffect(() => {\n    // in case the event ends outside the box\n    window.onmouseup = onMouseUp;\n    window.onmousemove = onMouseMove;\n  }, [onMouseUp, onMouseMove]);\n\n  return (\n    <div className={clxs('App', 'noselect')}>\n      <h1>Select area component</h1>\n      <div\n        ref={refContainer}\n        className=\"selectable-group\"\n        onMouseDown={onMouseDown}\n        onMouseMove={onMouseMove}\n        onMouseUp={onMouseUp}\n        style={{\n          height: 400,\n          backgroundColor: '#f5f5f5',\n          padding: '1rem'\n        }}\n      >\n        <Context.Provider value={{ registerSelectedItem }}>\n          <List />\n        </Context.Provider>\n      </div>\n      <div>\n        <span style={{fontSize: 18}}>Item selecionados: </span>\n        {selectingItems && selectingItems.map((el, i) => (\n          <span key={i} style={{ fontSize: 16, fontWeight: 'bold', margin: '2rem'}}>{el.props.value}</span>\n        ))}\n      </div>\n\n      <div ref={ref} className={clxs('selector', 'noselect')} style={{ cursor: 'default' }}/>\n    </div>\n  );\n}\n"],"sourceRoot":""}